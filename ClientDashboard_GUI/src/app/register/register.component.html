<p-dialog header="Further Verification" [modal]="true" [(visible)]="verifyEmailDialogVisible" [style]="{ width: '25rem' }">
    <div class="delete-message">
      <span class="p-text-secondary block mb-8">Now that your account is created ensure you verify your email before logging in</span>
      <img src="/assets/images/plain-email-verification-image.png">
    </div>
      <div class="flex justify-end gap-2">
          <p-button label="Cancel" severity="secondary" (click)="verifyEmailDialogVisible = false" />
      </div>
</p-dialog>

<div class="register-form-container">
  <h1 class="header">Register Below</h1>
    <div class="register-field">
      <div class="register-field">
        <p-iftalabel>
          <input pInputText id="firstName" [(ngModel)]="firstName" />
          <label>First Name</label>
        </p-iftalabel>
      </div>
      <div class="register-field">
        <p-iftalabel>
          <input pInputText id="surname" [(ngModel)]="surname" />
          <label>Surname</label>
        </p-iftalabel>
      </div>
       <div class="register-field">
        <p-iftalabel>
          <input pInputText id="email" [(ngModel)]="email" />
          <label>Email</label>
        </p-iftalabel>
      </div>
        <div class="register-field">
        <p-iftalabel>
          <p-inputmask
          mask="+44 9999 999999"
          [(ngModel)]="phoneNumber"
          placeholder="+44 7700 900000"
            />
          <label>UK Phone Number</label>
        </p-iftalabel>
      </div>
      <div class="register-field">
        <p-iftalabel>
            <p-password [(ngModel)]="password" toggleMask="true"/>
            <label>Password</label>
        </p-iftalabel>
      </div>
       <div class="register-field radio-section">
        <label class="user-type-label">User Type</label>
        <div class="radio-buttons">
          <div class="radio-button" >
              <p-radiobutton name="userType" value="trainer" [(ngModel)]="userType" inputId="1" />
              <label for="1" class="ml-2 radio-label">Trainer</label>
          </div>

          <div class="radio-button">
              <p-radiobutton name="userType" value="client" [(ngModel)]="userType" inputId="2" />
              <label for="2" class="ml-2 radio-label">Client</label>
          </div>
        </div>
        <div class="client-verification">
        @if(userType == "client"){
          <div class="register-field">
            <p-iftalabel>
              <p-inputmask
              mask="+44 9999 999999"
              [(ngModel)]="trainerVerificationPhoneNumber"
              placeholder="+44 7700 900000"
                />
              <label>Trainer Phone Number</label>
            </p-iftalabel>
      </div>
        <div class="card flex justify-center">
          <p-togglebutton 
            [disabled]="true"
            [onIcon]="'pi pi-check'"
            [offIcon]="'pi pi-times'" 
            [(ngModel)]="trainerNumberVerified" 
            onLabel="" 
            offLabel="" 
            styleClass="w-full sm:w-40" 
            ariaLabel="Confirmation" />
        </div>
        <p-button class="client-verify-button" label="Verify" severity="info" (click)="verifyClientUnderTrainer(trainerVerificationPhoneNumber, firstName)"/>
        }
      </div>
    </div>
      <div class="button-container">
          <p-button class="register-button" label="Register" severity="success" 
          (click)="userRegister(email, firstName, surname, phoneNumber, userType, verifiedClientId, verifiedTrainerId, password)"/>
          <p-button class="to-login-button" label="To Login" severity="secondary" routerLink="/login"/>
      </div>
</div>
    
